### this configuration file contains ryft-server options.
### most of the options may be overriden by corresponding
### command line option (noted in parenthesis).

### main search engine and its options
search-backend: ryftprim
backend-options:
  ryftprim-legacy: true
#  instance-name: .rest-8765         # server's working directory (inside /ryftone)
  ryftprim-exec: /usr/bin/ryftprim
  ryftone-mount: /ryftone
  open-poll: 100ms                   # open INDEX&DATA file poll timeout
  read-poll: 100ms                   # read INDEX&DATA file poll timeout
  read-limit: 100                    # maximum number of read attempts

### start listening on this address and port (--address)
address: :8765

### HTTPS support (--tls, --tls-address, --tls-cert, --tls-key)
tls:
  enabled: false
  address: :8766
  cert-file: "<certificate file name>"
  key-file: "<key file name>"

### authentication type: none, file, ldap (--auth)
auth-type: none

### JWT authentication (--jwt-alg, --jwt-secret, --jwt-lifetime)
### secret may be simple string or file reference, for example "@~/.ssh/id_rsa"
auth-jwt:
  algorithm: HS256
  secret: "<secret key>"
  lifetime: 1h

### file based authentication (--users-file)
auth-file:
  users-file: /etc/ryft-users.yaml

### LDAP based authentication (--ldap-server, --ldap-user, --ldap-pass, --ldap-query, --ldap-basedn)
auth-ldap:
  server: ldap.forumsys.com:389
  username: "read-only-admin,dc=ryft,dc=one"
  password: "password"
  query: "(&(cn=%s))"
  basedn: "dc=ryft,dc=one"
#  insecure-skip-tls: true
#  insecure-skip-verify: true


### run server in local mode (no cluster, no consul, no load balancing) (--local-only)
# local-only: true

### run server in debug mode - a lot of log messages (--debug)
# debug-mode: true

### advanced logging options (--logging=debug or --logging=release)
### each section contains set of logging levels
# logging: release
logging-options:
  custom:
    core: debug
    core/catalogs: debug
    core/pending-jobs: debug
  debug:
    core: debug
    core/catalogs: debug
    core/pending-jobs: debug
    core/busyness: debug
    search/ryftprim: debug
    search/ryftone: debug
    search/ryfthttp: debug
    search/ryftmux: debug
    search/ryftdec: debug
  release:
    core: info


### keep intermediate INDEX and DATA files, used for debugging (--keep)
# keep-results: true

### busyness tolerance (--busyness-tolerance)
# busyness-tolerance: 1

### HTTP/HTTPS read/write timeout
# http-timeout: 1h

### server's runtime settings (list of pending jobs, etc...)
# settings-path: /var/ryft/server.settings

### number of possible boolean operators per expression type
booleans-per-expression:
  es:   1
  fhs:  1
  feds: 1
  ns:   0
  ds:   1
  ts:   1
  rs:   0
  ipv4: 1
  ipv6: 1

### catalogs related options
catalogs:
  max-data-file-size: 64MB       # data file size limit: KB, MB, GB, TB
  cache-drop-timeout: 10s        # internal cache lifetime
  default-data-delim: "\n\f\n"   # default data delimiter
  temp-dir: /tmp/ryft/catalogs   # for temporary files
